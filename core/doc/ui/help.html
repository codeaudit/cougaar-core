<HTML><HEADER><TITLE>COUGAAR UI PlanServer</TITLE></HEADER>
<BODY>
<CENTER><H2><BOLD>(HELP) COUGAAR UI 
LogPlanServer</H2></CENTER>
<P>Service URL parameters/resource-references recognized by 
PlanServer:</P>
<TABLE bgColor=#d3d3d3 border=1 cellPadding=1 cellSpacing=1 height=310 
style="HEIGHT: 310px; WIDTH: 701px" width=701>
    
    <TR>
        <TD>?ECHO <FONT color=teal face="">(reflects browser's incoming _HTTP_ as _HTML_ 
            document)</FONT></TD></TR>
    <TR>
        <TD>?FILE?DOCUMENT=<EM><FONT color=blue face="">PATH</FONT></EM>&nbsp;&nbsp;&nbsp; [<EM><FONT color=blue face=""><FONT color=black 
            face="">PATH</EM>:</FONT> </FONT>relative to 
            server working directory, it can refer to sub-directories only (no 
            access to parent directories).]</TD></TR>
    <TR>
        <TD>?LOGFILE&nbsp; <FONT color=teal 
            face="">(displays contents of LogPlanServer's current 
            log file -- if logging enabled)</FONT>
    <TR>
        <TD>?PROXY?START?URL=<EM><FONT color=white 
            face=""><FONT 
            color=blue face="">URL</FONT>&nbsp;</EM>&nbsp;&nbsp; <FONT color=black face="">[<EM><FONT color=black face="">URL</EM>:</FONT>&nbsp; redirect resource]<FONT color=teal face="">(turns on proxy session, and sets 
            redirect location)</FONT></FONT></FONT></TD></TR>
    <TR>
        <TD>?PROXY?END&nbsp;&nbsp;&nbsp; <FONT 
            color=teal face="">(turns off proxy 
            session)</FONT></TD></TR>
    <TR>
        <TD>?LOAD?ARCHIVE=<FONT color=blue 
            face=""><EM>URL</EM></FONT>?OBJECT=<EM><FONT 
            color=#0000ff>JN</FONT></EM><FONT color=blue 
            face=""><EM>ame</EM></FONT>?RESOURCE=<EM><FONT color=blue 
            face="">Path</EM>&nbsp;&nbsp; 
            </FONT><FONT color=black face="">[<EM>JN</EM><EM>ame</EM></FONT>:&nbsp; java class name of 'Plan Service 
            Provider' located at URL; <FONT color=black 
            face="">Path:</FONT> logical PSP location at this server, must be 
            terminated with a .PSP suffixed name] 
    <TR>
        <TD>?UNLOAD?RESOURCE=<EM><FONT color=blue 
            face="">Path</EM>&nbsp;&nbsp; </FONT>[ <FONT color=black 
            face="">Path:</FONT> PSP sub-resource path and PSP name] 
    <TR>
        <TD>?LIST?PSP&nbsp;&nbsp; <FONT color=teal face="">(Returns HTML list of all PSPs currently 
            registered)</FONT> 
    <TR>
        <TD>/&lt;PATHELEMENT&gt;/&lt;PATHELEMENT&gt;/.../<EM><FONT 
            color=#0000ff>PSP</FONT></EM><EM><FONT 
            color=#0000ff>N</FONT></EM><FONT color=blue 
            face=""><EM>ame</EM></FONT>&nbsp;&nbsp;&nbsp; [<EM><FONT color=black face="">PSP</EM><EM>N</EM><EM>ame</EM>:</FONT>&nbsp; must be terminated with '.PSP'] <FONT 
            color=teal face="">(references a PSP resource at 
            server by its logical path)</FONT> 
    <TR>
        <TD>/$NAME/...&nbsp; <FONT 
            color=teal face="">(identifies NAME as a LogPlanServer 
            alias)</FONT>
    <TR>
        <TD>?TEST?POST <FONT color=teal 
            face="">(Test:&nbsp; will return HTML rendering of ASCII 
            POSTed data)</FONT></TD></TR>
    <TR>
        <TD>
            <P>?HELP&nbsp;&nbsp; <FONT color=teal 
            face="">(returns this document)</FONT></P></TD></TR></TABLE>
<P><FONT color=black face=""><U></U></FONT><FONT color=black 
face=""><EM>Note that URL parameters are not case 
sensitive.</EM></FONT></P>
<P><FONT color=black face=""><U>Example/Sample</U></FONT> Plan Service Provider resources 
currently supported:</P>
<P>

<TABLE bgColor=#d3d3d3 border=1 cellPadding=1 cellSpacing=1 height=75 
style="HEIGHT: 75px; WIDTH: 702px" width=701>
    
    <TR>
        <TD>/DEMO/ALPINE/EBB.PSP&nbsp;&nbsp; <FONT 
            color=teal face="">(HTML form view and edit of 
            server &ldquo;blackboard&rdquo; data object) </FONT></TD></TR>
    <TR>
        <TD>/DEMO/ALPINE/KEEPALIVE.PSP <FONT color=teal 
            face="">(long-running PSP which periodically 
            sends line to client)</FONT></TD></TR>
    <TR>
        <TD>/DEMO/ALPINE/CLUSTERS.PSP <FONT color=teal 
            face="">(renders URLs to registered 
            LogPlanServer -clusters- as HTML table)</FONT></TD></TR></TABLE></P>
<P><FONT color=black face=""><EM>Note that resource directory and resource names (xxx.PSP) 
are case sensitive!&nbsp;&nbsp; Note that if you provide no directory location, 
a PSP is located in &quot;DEFAULT&quot;.</EM></FONT></P>
<P>&nbsp;</P>
<CENTER><H2>Running the Server</H2></CENTER>This server currently 
runs on port 5555. Hence running on your local machine, a sample URL is: 
<DIV align=center>
<PRE>'http://localhost:5555/?help'</PRE></DIV>
<PRE>'?help' returns this document.</PRE>
<P>If multiple servers (eg. multiple debug UI plugins) are 
running on the same machine, then port 5555 grabbed by the first server, and 
servers after this will increment from this start port until finding the first 
available port. Currently, the relationship between ports and a cluster is only 
available via looking at system output at the server console. Example:</P>
<PRE>
CLUSTERXXXX listening...  (port=5555)
...
CLUSTERXXXY listening...  (port=5556)
...
CLUSTERXXXZ listening...  (port=5557)
</PRE>
<P>With the next release, the COUGAAR cluster name service 
[Voyager Federated Name Service (FDS)] will be exposed to the server. With this 
access, a user could then ask any server to list &quot;all the other 
servers&quot; registered within the Society.</P>


<P></P>
<P><FONT COLOR=#990000 SIZE=+1>LogPlanServer Logging.</FONT>
<P>LogPlanServers will look at system properties to see if 
the alp.lps.LoggingDirectory property is defined.&nbsp;&nbsp; Example, with 
dummy value setting:&nbsp; -Dalp.lps.LoggingDirectory=d:\temp\lpslogs</P>
<P>If the property is set, it will TURN ON the logging 
service and interpret value as directory to place logplanserver log files If the 
property is not set, logging is TURNED OFF.</P>
<P>The current logfile of a LogPlanServer can be viewed 
remotely as an HTML document.&nbsp;&nbsp; This document is returned when the URL 
parameter ?LOGFILE is used.&nbsp; Example:</P>
<P>_http://localhost:5555/$&lt;1BDE&gt;?LOGFILE</P>
<P>If the logging feature is not active (turned on) at the 
LogPlanServer, a document containing an error message is returned.</P>
<P>&nbsp;</P>
<P><FONT COLOR=#990000 SIZE=+1>As a UI 
PlugIn.</FONT> ---</P>
<P></P>
<P><FONT COLOR=#990000 SIZE=+1>From the 
Command-Line.</FONT> Command line looks something like this:
<PRE>java -nojit -Dorg.cougaar.install.path=D:\Dev\alp ui.planserver.ThreadedPlanServer</PRE>
<P>Note. Running from the command line gives you a fully 
operational Plan Server, but it doesn't give you access to PlugIn services to 
answer Log Plan queries etc. </P>
<P><FONT style="BACKGROUND-COLOR: #ffffff">In the working directory where the server is launched, the help.html file 
should be installed if you plan to use ?help option.</FONT></P> 
<P></P>
<P></P>
<CENTER><H2>Basic Services.</H2></CENTER>
<P><FONT COLOR=#990000 SIZE=+1>Simple 
Proxy Service.</FONT> The PlanServer can serve as a Proxy for another webserver. 
the intent is to defer APPLET, IMAGE etc. serving responsibilities to a 
webserver. Hence, COUGAAR debugging applets etc. can be used within the normal 
applet/browser security model.&nbsp;&nbsp; The usage pattern is this:&nbsp; a.) 
define proxy session, b.) during the session use the PlanServer as 
&quot;proxy&quot; host for your applet/application; c.) when done, turn off the 
proxy session.
<PRE> ?proxy?start?<FONT color=red face="">url=xxxxxx</FONT>    // turns proxy session and sets redirect location </PRE>
<P><FONT color=red face="">'url=xxxxxxx'</FONT> refers to a SERVER LOCATION where the proxy can look 
for future resource requests and generally&nbsp; <FONT color=red face="">not to </FONT>a specific resource (eg. document or FILE). 
Thus (1 and 2.) are sample url arguments </P>
<OL>
    <LI>'http://www.netscape.com/'
    <LI>'http://www.foo.bar/sublocation1/'</LI></OL>All&nbsp; 
GETS/POSTS (URL requests) to server which are NOT ANSWERED by Service LPs are 
redirected to proxy location.&nbsp; In this way a client can talk to an 
apparent&nbsp; SINGLE HOST&nbsp; (PlanServer) for both its applets etc. as well 
as for its PlanServer services.&nbsp; The win here is 2 fold.&nbsp; It allows 
the PlanServer to be light-weight; it allows applets with normal security to be 
able to talk to a single host (PlanServer).
<PRE>?proxy?end // turns off proxy session.</PRE>
<P></P>
<P><FONT COLOR=#990000 SIZE=+1></FONT>Proxy sessions are implicitly turned off by starting a new one.
<P><U>How to view a document at a proxy 
location.</U>&nbsp; For example, if you wanted to view document located at</P>
<P>'http://aaa.bbb.ccc/foo/bar.html'</P>
<P>2 steps are undertaken:</P>
<OL>
    <LI>define proxy session, example:&nbsp;&nbsp; 
    'http://localhost:5555/?proxy?start?url=http://aaa.bbb.ccc/foo'
    <LI>access document via PlanServer proxy:&nbsp; 
    'http://localhost:5555/bar.html</LI></OL>
<P><FONT COLOR=#990000 SIZE=+1></FONT>&nbsp;</P>
<P><FONT COLOR=#990000 SIZE=+1>Proxy for 
other LogPlanServers.</FONT> The PlanServer can serve as a Proxy for other 
LogPlanServers.&nbsp; LogPlanServers are identified by way of their alias.&nbsp; 
The alias of a LogPlanServer (running within COUGAAR Society context) is its 
ClusterID.&nbsp; The literal ClusterID &quot;&lt;3ID&gt;&quot; can be used as 
well as just &quot;3ID&quot;.&nbsp; Aliases are case-sensitive.</P>
<P>http://localhost:5555/$&lt;3ID&gt;/?LIST?PSP&nbsp; will 
list PSPs at the LogPlanServer located with 3ID Cluster.</P>
<P>&nbsp;</P>
<P><FONT COLOR=#990000 SIZE=+1>Returning 
Contents of Files.</FONT> The PlanServer can return the contents of a file to a 
requestor If the file cannot be found or read, an HTML document containing a 
warning is returned instead</P>
<PRE> ?file?document=xxxxxxxxxx    // file path is relative to server location. </PRE>
<P></P>
<P><FONT COLOR=#990000  SIZE=+1>Malformed 
URLs.</FONT> If PlanServer does not recognize the URL request, it will return an 
HTML document containing debugging information which can help in determining why 
no Service LP answered the <B>request for service.</B>
<P></P>
<P><FONT COLOR=#990000  SIZE=+1>Exception 
Handling.</FONT> If an exception occurs during the course of trying to satisfy a 
service request. The server will return an HTML document containing the stack 
trace. Exceptions can be caused by faulty PlanServerProviders being submitted to 
the server. Note that, should the exception be generated by a GET request 
internal to a top-level document, eg. request for a document APPLET or IMAGE, 
the browser may not render the result. However direct URL submissions which 
result in exceptions will be seen.</P>
<P></P>
<P><FONT COLOR=#990000  SIZE=+1>Browser 
Test. Echo.</FONT>
<PRE> ?echo    // returns the HTTP stream from browser back as an HTML document</PRE>
<P></P>
<P><FONT COLOR=#990000  SIZE=+1>Help.</FONT>
<PRE> ?help    // returns this document. </PRE>

<CENTER><H2 align=center>Plan Services.</H2></CENTER>

<P><FONT COLOR=#990000  SIZE=+1>Plan 
Service Providers</FONT>

<P>PlanServiceProviders (<FONT color=red 
face="">PSPs</FONT>) are typically executed as a 
&ldquo;light-weight&rdquo; server-side action which writes to an output stream 
to the UI application, then quits. A UI application , based on this usage 
pattern, can poll periodically to stimulate the PSP to rerun and receive updated 
data. It is anticipated for most COUGAAR UI usage, this will be sufficient. However, 
in some cases (eg &ldquo;Alert&rdquo; notification), it may be more practical 
for the LogPlanServer to &ldquo;push&rdquo; an update to a UI application rather 
than have the UI application repeatedly &ldquo;poll&rdquo; for it. This option 
will be supported at the LogPlanServer via long-running 
PlanServiceProviders.</P>

<P><FONT COLOR=#990000  SIZE=+1></FONT>Minimum requirements of a PSP :</P>
<UL>
    <LI>implements the <FONT color=red face="">PlanServiceProvider.java 
    </FONT>interface
    <LI>a public zero parameter constructor is defined 
 </LI></UL>

<P>&nbsp;</P>

<P><FONT color=firebrick face="" size=4>PSP authorship, details, hints, tips</FONT></P>
<OL>
    <LI>a PSP must implement the <FONT color=red 
    face="">PlanServiceProvider.java</FONT> interface
    <LI>in addition, a &quot;long-running&quot; PSP must 
    implement the <FONT color=red face="">KeepAlive.java 
    </FONT>interface ( marker )
    <LI>a PSP which subscribes to changes (uses subscription 
    API), must implement the <FONT color=red face="">UISubscriber.java</FONT> interface
    <LI>all PSPs must have a public zero parameter 
    constructor defined.
    <LI>extend the provided PSP_BaseAdapter.java -- greatly 
    simplifies writing PSPs
    <LI>if you plan to always evoke your PSP by direct 
    reference (URL), don't need to implement test() method. </LI></OL>

<P>&nbsp;</P>

<P><FONT color=firebrick face="" size=4>Loading Plan Service Providers</FONT></P>

<P>PSPS can be &quot;built into the LogPlanServer&quot; -- 
effectively compiled into server implementation.&nbsp; The sample/base PSPs (see 
above table) are examples of this.&nbsp;</P>

<P>PSPs can also be dynamically loaded as part of operation 
of a client UI application.&nbsp; To do so requires that these arguments be 
defined.</P>
<UL>
    <LI>?LOAD
    <LI>?OBJECT
    <LI>?ARCHIVE
    <LI>?RESOURCE</LI></UL>
<P>&nbsp;&nbsp;&nbsp;&nbsp; Example:</P>
<DIV align=center>

<PRE>h_tp://aaa.bbb.ccc:5555/?LOAD?OBJECT=PSPClassName?ARCHIVE=http://xxx.yyy.zzz/archivedirectory
</PRE></DIV>


<P>The <FONT color=navy face=""><FONT color=blue 
face="">?OBJECT</FONT> </FONT>argument must be 
class name of PSP object to be downloaded.&nbsp; This must be a valid PSP class 
(implements the PlanServiceProvider) interface.&nbsp;</P>


<P>The <FONT color=blue face="">?ARCHIVE 
 </FONT>argument defines the location (URL) of the location of the class named in 
?OBJECT.&nbsp; The value must be full URL specifying protocol and port.</P>


<P>The <FONT color=blue face="">?RESOURCE </FONT>argument defines the resource path and name to be given 
the .PSP at the server.&nbsp; This is given in the form of:</P>


<P>/&lt;PATHELEMENT&gt;/&lt;PATHELEMENT&gt;/.../<EM><FONT 
            color=#0000ff>PSP</FONT></EM><EM><FONT 
            color=#0000ff>N</FONT></EM><FONT color=blue 
            face=""><EM>ame</EM></FONT>&nbsp;&nbsp;&nbsp; [<EM><FONT 
            color=#0000ff>PSP</FONT></EM><EM><FONT color=#0000ff>N</FONT></EM><FONT color=blue 
            face=""><EM>ame</EM></FONT>:&nbsp; '.PSP' 
terminated name of PSP]</P>


<P>A PSP is referenced externally using its PATH (see 
section on &quot;Addressing PSPs&quot;).</P>


<P>Duplicate PSPs are <U><FONT color=black 
face="">not</FONT></U> loaded.&nbsp;&nbsp; A 
duplicate PSP is defined as a PSP whose resource path and name is identical to 
one already loaded.</P>


<P>&nbsp;</P>

<P>&nbsp;<FONT COLOR=#990000  SIZE=+1>Long-Running Plan Service Providers</FONT></P>

<P><FONT COLOR=#990000  SIZE=+1></FONT>&nbsp;A long-running PlanServiceProvider is one which when evoked, 
keeps alive a long running connection to the client application. Any 
PlanServiceProvider which implements the <FONT color=red face="">KeepAlive.java 
</FONT>interface will be handled differently than other 
PSPs. A &ldquo;keep alive&rdquo; PSP is allowed to remain running indefinitely 
at the server.&nbsp; Furthermore, during its execution, it may write to the 
output stream incrementally and send data thusly to the client over a long 
period of time.</P>

<P>In order to insure that both a long-running PSP has good 
connection to a client, the server will periodically send an 
&quot;&lt;ACK&gt;&quot; to the client -- example, once every 3 
minutes.&nbsp;&nbsp;&nbsp; A client conversing with a long-running PSP should 
filter these out.&nbsp;&nbsp; The pro-active stance (periodically sending 
&quot;ack&quot;) by the server rather than passively trapping connection 
exceptions only, is to prevent circumstances where a long-running PSP remains 
silent and don't actively exercise the connection themselves.</P>

<P>Note.&nbsp;&nbsp; At this time, per client IP address, 
there can only be one of each PSP server resource running at a time.&nbsp;&nbsp; 
This is a defensive restriction so clients going up and down don't accumulate an 
excesive number of &quot;orphaned&quot; long running PSPs.&nbsp;&nbsp; In the 
long-run this will likely change in favor of some sort of &quot;heartbeat&quot; 
model&nbsp; where clients and PSPs exchange &quot;heart beat messages&quot; to 
let PSPs&nbsp; know their clients are still alive.</P>

<P>&nbsp;</P>

<P><FONT COLOR=#990000  SIZE=+1>Addressing a PlanServiceProvider (PSP).</FONT></P>
<P> A PSP is evoked by referencing it as a resource at the 
server.&nbsp;&nbsp; As a resource of that server, it may be located in a logical 
and arbitrary sub-directory.&nbsp; Example: 
</P>
    
<PRE><FONT color=red face="">_http://xxx.www.zzz:5555</FONT>/Demo/UIDebug/MyStuff/PlanElements<FONT 
    color=red face="">.PSP</FONT></PRE>
<UL>
    <LI>Note that the resource is located in a 
    &quot;directory&quot; Demo/UIDebug/MyStuff...
    <LI>Note that the resource name has a .PSP suffix.&nbsp; 
    This is mandatory for PSPs</LI></UL>
    
<P><FONT COLOR=#990000  SIZE=+1></FONT>&nbsp;When an external client wishes to evoke this PSP, as a service 
of the LogPlanServer, it must reference it explicitly using the directory and 
name (with .PSP suffix) which identifies that PSP.</P>
    
<P><FONT color=firebrick face=""><U>Any single PSP may be passed query 
information.</U></FONT></P>
    
<P>PSPs which require client information be passed,&nbsp; 
may require URL parameters.&nbsp; In this way a single PSP may be designed to 
decide its document response based to an incoming service request based on URL 
parameters and/or POST data.</P>
    
<PRE><FONT color=black face="">h_ttp://xxx.www.zzz:5555</FONT>/Demo/UIDebug/MyStuff/PlanElements<FONT 
    color=red face=""><FONT color=black face="">.PSP?<FONT color=blue face="">TYPE=</FONT>ALLOCATIONS?<FONT color=blue face="">STARTDATE=</FONT>11_13_98</FONT></FONT></PRE>
    
<P><FONT color=firebrick face=""><U>Querying Multiple PSPs.</U></FONT></P>
    
<P>The following feature is supported in the LogPlanServer 
implementation; however, at this time this form of access is not expected to be 
commonly used.&nbsp;&nbsp; The server can ask every PSP without regard to their 
location (as a resource of the server) if they are interested in handling a 
particular service request.&nbsp; This will happen if the ?PSP URL parameter is 
included.&nbsp;&nbsp; PSPs are asked in no particular order.&nbsp; This implies 
their can be no overlap at this time in a PSP's &quot;interests&quot;.&nbsp; A 
PSP may examine the requestor's URL parameters or POST data for query or 
client-state information which it may use to determine its reaction.&nbsp; This 
approach is intended for use by a community of PSP developers who have developed 
a set of shareable, interacting PSPs using an establish protocol for query.</P>
    
<PRE>
 <TABLE bgColor=#d3d3d3 border=1 cellPadding=1 cellSpacing=1 width=701><TR><TD>?PSP&nbsp;&nbsp; <FONT color=teal face="">(URL parameter required to query all PSPs)</FONT></TD></TR></TABLE>
 </PRE>
    
<P><FONT color=firebrick face="" size=4></FONT>&nbsp;</P>
    
<P><FONT color=firebrick face="" size=4><A HREF="pspdevguide.html">For further information on 
PSP development, read the PSP developer's guide.</A></FONT></P>


<P><FONT color=red face="" size=2>Copyright 1999 BBN Systems and Technologies, A Division of BBN Corporation; 
10 Moulton Street, Cambridge, MA 02138 (617) 873-3000</FONT></P>

<P>&nbsp;</P>
<P>&nbsp;</P></U>
<BLOCKQUOTE></BLOCKQUOTE>
<BLOCKQUOTE></BLOCKQUOTE>
<BLOCKQUOTE></BLOCKQUOTE>
</BODY></HTML>
