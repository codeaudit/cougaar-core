<!DOCTYPE HTML PUBLIC "-//W3C//DTD W3 HTML//EN"><HTML>
<BODY>
<H1 align=center>Standard UI PSP Services</H1>
<H2 align=center>Querying ALPINE-provided Standard PSPs for 
LogPlan XML</H2>
<P><FONT face="" size=3><FONT 
face="Times New Roman"><FONT>The 
following code fragment illustrates a java client establishing a connection to the 
ALPINE UIData PSP and retrieving a XML response.&nbsp; </FONT></FONT> </FONT><FONT><FONT 
face="Times New Roman"></FONT></FONT> 
</P>
<P><FONT face="" size=3><FONT 
face="Times New Roman"><FONT>In the 
example below, a simple ConnectionHelper class is used as a shallow wrapper 
around an URL connection instance.&nbsp; new ConnectionHelper() creates the 
instance to the URL.&nbsp; sendData() writes to its outputstream, and 
getResponse() reads bytes from its inputstream and returns the byte 
buffer.</FONT></FONT> </FONT><FONT><FONT 
face="Times New Roman"></FONT></FONT> 
</P>
<P><FONT face="Times New Roman">The PSP 
configuration information (location/path and name of PSP) can be obtained from 
the class of XMLClientConfiguration.&nbsp; In the example below, the use of the 
PSP_package and UIDataPSP_id attributes identify the ALPINE UI Data PSP.</FONT> 
</P>
<P><FONT face="Times New Roman"></FONT>The query string adheres to the UI Data Query Language 
specification.&nbsp; The return will be an XML document which maps to a set of UI 
Data objects which answers the query. 
</P>
<P>
<BR>&nbsp; 
</P>
<PRE><FONT color=black face="">
              // Connect to target cluster's URL
              ConnectionHelper xmlconn = null;
              byte[] reply = null;

              //
              // Define a URL connection to a PSP...
              //</FONT><FONT color=green face="">
</FONT>
<FONT color=blue face="">
              xmlconn = new ConnectionHelper(url,
	                  XMLClientConfiguration.PSP_package,
	                  XMLClientConfiguration.UIDataPSP_id);
</FONT>
              //
              // Post query text back to it...
              //
<FONT color=blue face="">
              xmlconn.sendData(&quot;Task&quot;); // query = 'get all tasks' at this cluster
	      reply = xmlconn.getResponse();
</FONT>

              //
              // Output the response to console...
              //
              int len = reply.length;
              System.out.write(reply,0,len);

</PRE>
<PRE>&nbsp;

</PRE>
<H2 align=center>UI Data Query Language Specification </H2>
<PRE>&nbsp;
</PRE>

<P>The following grammar defines the UI Data query language 
which is used to query the UI Data PSP for data. In the above example, 
&quot;Task&quot; was used to establish that the above client was seeking 
&quot;all Tasks&quot; at the given URL (referencing a Cluster + LogPlanServer).The client GUI, invoked as:
<PRE>
              java ui.planviewer.XMLUIDataClient
</PRE>
can be used to generate and send queries to the UI Data PSP, and display the results. For example, using this GUI to display all Tasks, you can see the LogPlanObjectPropertyNames (used in the grammar) for a Task.
</P>
A colon followed by a comma separated list of top level LogPlanObjectPropertyNames, can be appended to the request in order to return a specific set of properties.  For example, the query
<PRE>
              Task:source,destination
</PRE>
will return only the source and destination of a Task.
<P>
 
<PRE><TABLE border=1 cellPadding=1 cellSpacing=1 width=75%><TR><TD>Query = Command | LogPlanObjectName | Term | ComplexTerm |<EMPTY> </TD></TR><TR><TD>Command = LIST_CLUSTERS</TD></TR><TR><TD>LogPlanObjectName = Aggregation | Allocation | Asset | AssetTransfer | Expansion | FailedDisposition | PlanElement | Task | Workflow | Policy</TD></TR><TR><TD>Term = LogPlanObjectPropertyName Comparator Value</TD></TR><TR><TD>LogPlanObjectPropertyName = LogPlanObjectName.PropertyName | LogPlanObjectPropertyName.PropertyName</TD></TR><TR><TD>Comparator = &lt; | &gt; | = | != | &lt;= | &gt;=</TD></TR><TR><TD>ComplexTerm = Term | Term Combiner Term</TD></TR><TR><TD>Combiner = & | |</TD></TR></TABLE>
   
</PRE>
<P>Some sample queries based on this grammar.</P>
<P>
<TABLE border=1 cellPadding=1 cellSpacing=1 width=75%>
    
    <TR>
        <TD>Task </TD></TR>
    <TR>
        <TD>Asset </TD></TR>
    <TR>
        <TD>PlanElement </TD></TR>
    <TR>
        <TD>Task.source=1BDE </TD></TR>
    <TR>
        <TD>Task.source=1BDE | Task.destination=1BDE</TD></TR>
    <TR>
        <TD>Task.source=1BDE & Task.verb=Transport</TD></TR>
    <TR>
        <TD></TD></TR></TABLE></P>
<P>&nbsp;</P>

<PRE>&nbsp;

</PRE>
<H2 align=center>Using A Sample Applet to Query Clusters</H2>
<PRE>&nbsp;
</PRE>

<P>The class ui.planviewer.XMLQueryApplet can be used
to query the MCCGlobalMode cluster for the following information:
<UL>
<LI>transportation schedules</LI>
<LI>assets</LI>
<LI>asset utilization</LI>
</UL>
</P>
<H4>Set-up</H4>
<P>This applet has been tested in Netscape Communicator 4.51.
</P>
<OL>
<LI>The applet requires that you load the Java 1.2 plugin (See <A href="http://java.sun.com/products/plugin/index.html">http://java.sun.com/products/plugin/index.html</A>)
</LI>
<LI>The applet requires access to openmap.bbn.com, a machine located at BBN, and outside the BBN firewall.
</LI>
<LI>In your browser, specify the following URL:
<PRE>
        http://localhost:5558/?PROXY?START?URL=http://openmap.bbn.com/~travers/
</PRE>
where localhost is the host running the MCCGlobalMode cluster and 5558 is the port on which this cluster's log plan server is running. (Note that if the entire minitestconfig society is running on a host, then by default, the MCCGlobalMode cluster will be running on port 5558.  The port restriction will be removed in a future release.)
</LI>
<LI>
In your browser, specify the following URL:
<PRE>
        http://localhost:5558/query_example.html
</PRE>
</LI>
</OL>
<P>The applet will be displayed with radio buttons allowing the user to
select the query to send to the MCCGlobalMode cluster.
</P>
</BODY>
</HTML>
